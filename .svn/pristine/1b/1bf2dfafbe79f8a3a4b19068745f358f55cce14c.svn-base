using System;
using System.Collections.Generic;
using System.ComponentModel;
using System.Data;
using System.Drawing;
using System.Linq;
using System.Text;
using System.Windows.Forms;

namespace WindowsFormsApplication1
{
    public partial class Form2 : Form
    {
        public Form2(List<int> list)
        {
            InitializeComponent();
            Init(list);
        }

        private void Init(List<int> list)
        {
            for (int i = 0; i < list.Count; i++)
            {
                DataGridViewButtonColumn m_btncolumn = new DataGridViewButtonColumn();
                m_btncolumn.HeaderText = list[i].ToString();
                m_btncolumn.Width = 40;
                dataGridView1.Columns.Insert(i, m_btncolumn);
            }
            for (int i = 0; i < 2; i++)
                dataGridView1.Rows.Add();
            dataGridView1.RowHeadersWidth = 60;
            dataGridView1.Rows[0].HeaderCell.Value = "△";
            dataGridView1.Rows[1].HeaderCell.Value = "□";
            dataGridView1.Rows[2].HeaderCell.Value = "☆";
            
        }

        private void dataGridView1_CellContentClick(object sender, DataGridViewCellEventArgs e)
        {
            if (e.RowIndex >= 0)
            {
                add_click(e.RowIndex, e.ColumnIndex);
            }
        }

        private void add_click(int RowIndex, int ColumnIndex)
        {
            DataGridViewCell cell = dataGridView1.Rows[RowIndex].Cells[ColumnIndex];
            cell.Value += dataGridView1.Rows[RowIndex].HeaderCell.Value.ToString();
            if (cell.Value.ToString().Length >= 3)
            {
                Console.WriteLine(cell.Value.ToString());
                if (RowIndex >= 2)
                {
                    cell.Value = "☆☆☆";
                }
                else
                {
                    cell.Value = "";
                    add_click(RowIndex + 1, ColumnIndex);
                }
            }
        }
    }
}
